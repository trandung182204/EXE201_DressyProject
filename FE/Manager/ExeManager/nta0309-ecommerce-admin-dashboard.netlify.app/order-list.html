<!DOCTYPE html>
<html class="no-js" lang="zxx">

<!-- Mirrored from nta0309-ecommerce-admin-dashboard.netlify.app/order-list by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Jan 2026 02:38:14 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>
	<!-- Meta Tags -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content="Site keywords here">
	<meta name="description" content="#">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Site Title -->
	<title>Danh sách đơn hàng</title>

	<!-- Font -->
	<link
		href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&amp;display=swap"
		rel="stylesheet">

	<!-- Fav Icon -->
	<link rel="icon" href="img/favicon.png">

	<!-- sherah Stylesheet -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/font-awesome-all.min.css">
	<link rel="stylesheet" href="css/charts.min.css">
	<link rel="stylesheet" href="css/datatables.min.css">
	<link rel="stylesheet" href="css/jvector-map.css">
	<link rel="stylesheet" href="css/slickslider.min.css">
	<link rel="stylesheet" href="css/jquery-ui.css">
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="style.css">

</head>

<body id="sherah-dark-light">

	<div class="sherah-body-area">
		<!-- sherah Admin Menu -->
		<div id="header-container"></div>
		<!-- End sherah Admin Menu -->
		<div id="dashboard-container"></div>
		<!-- End Header -->

		<!-- sherah Dashboard -->
		<section class="sherah-adashboard sherah-show">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<div class="sherah-body">
							<!-- Dashboard Inner -->
							<div class="sherah-dsinner">
								<div class="row mg-top-30">
									<div class="col-12 sherah-flex-between">
										<!-- Sherah Breadcrumb -->
										<div class="sherah-breadcrumb">
											<h2 class="sherah-breadcrumb__title">Danh sách đơn hàng</h2>
											<ul class="sherah-breadcrumb__list">
												<li><a href="#">Trang chủ</a></li>
												<li class="active"><a href='order-list.html'>Danh sách đơn hàng</a></li>
											</ul>
										</div>
										<!-- End Sherah Breadcrumb -->

									</div>
								</div>
								<div class="sherah-table sherah-page-inner sherah-border sherah-default-bg mg-top-25">
									<table id="sherah-table__vendor" class="sherah-table__main sherah-table__main-v3">
										<!-- sherah Table Head -->
										<thead class="sherah-table__head">
											<tr>
												<th class="sherah-table__column-1 sherah-table__h1">Mã đơn</th>

												<th class="sherah-table__column-3 sherah-table__h3">Ngày tạo</th>
												<th class="sherah-table__column-4 sherah-table__h4">Trạng thái thanh
													toán</th>
												<th class="sherah-table__column-5 sherah-table__h5">Tổng tiền</th>

												<th class="sherah-table__column-7 sherah-table__h7">Trạng thái đơn hàng
												</th>
												<th class="sherah-table__column-8 sherah-table__h8">Hành động</th>
											</tr>
										</thead>
										<tbody id="orders-tbody" class="sherah-table__body"></tbody>
									</table>
								</div>
							</div>
							<!-- End Dashboard Inner -->
						</div>
					</div>


				</div>
			</div>
		</section>
		<!-- End sherah Dashboard -->

	</div>

	<!-- sherah Scripts -->
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery-migrate.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/charts.js"></script>
	<script src="js/datatables.min.js"></script>
	<script src="js/circle-progress.min.js"></script>
	<script src="js/jquery-jvectormap.js"></script>
	<script src="js/jvector-map.js"></script>
	<script src="js/main.js"></script>
	<script src="js/auth-header.js"></script>


	<script>
		async function loadLayout() {
			const headerRes = await fetch("header.html");
			document.getElementById("header-container").innerHTML = await headerRes.text();

			const dashRes = await fetch("dashboard.html");
			document.getElementById("dashboard-container").innerHTML = await dashRes.text();

			initSherahLayout();

			// ✅ quan trọng: gọi sau khi header đã có trong DOM
			if (window.loadAuthToHeader) window.loadAuthToHeader();
		}
	</script>
	<script>
		const isLocal =
			location.hostname === "localhost" ||
			location.hostname === "127.0.0.1";

		const API_BASE = isLocal ? "http://localhost:5135" : "";

		function getToken() {
			return localStorage.getItem("token") || "";
		}


		function formatDateTime(iso) {
			if (!iso) return "";
			const d = new Date(iso);
			const date = d.toLocaleDateString("vi-VN");
			const time = d.toLocaleTimeString("vi-VN");
			return `${date} <span class="sherah-table__time">${time}</span>`;
		}

		function paymentHtml(status) {
			const s = (status || "").toUpperCase();
			if (s === "SUCCESS" || s === "PAID") {
				return `<div class="sherah-table__status sherah-color2 sherah-color2__bg--opactity">Đã thanh toán</div>`;
			}
			return `<div class="sherah-table__status sherah-color1 sherah-color1__bg--opactity">Chưa thanh toán</div>`;
		}

		function orderHtml(status) {
			const s = (status || "").toUpperCase();
			if (s === "COMPLETED" || s === "SHIPPED") {
				return `<div class="sherah-table__status sherah-color2 sherah-color2__bg--opactity">${s}</div>`;
			}
			return `<div class="sherah-table__status sherah-color1 sherah-color1__bg--opactity">${s}</div>`;
		}

		async function bootOrderList() {
			await loadLayout();

			// init DataTable 1 lần duy nhất, DataTables tự gọi API
			$("#sherah-table__vendor").DataTable({
				searching: true,
				autoWidth: false,
				info: false,
				lengthChange: true,
				scrollCollapse: true,
				paging: true,
				language: {
					paginate: {
						next: '<i class="fas fa-angle-right"></i>',
						previous: '<i class="fas fa-angle-left"></i>'
					},
					lengthMenu: "Showing _MENU_",
					searchPlaceholder: "Search...",
					search: '<span class="sherah-data-table-label">Search</span>',
				},

				ajax: {
					url: API_BASE + "/api/Bookings/provider",
					type: "GET",
					dataSrc: function (json) {
						console.log("API JSON:", json); // ✅ debug luôn
						return json.data || [];
					},
					beforeSend: function (xhr) {
						const token = getToken();
						console.log("TOKEN:", token); // ✅ debug luôn
						xhr.setRequestHeader("Authorization", "Bearer " + token);
					},
					error: function (xhr) {
						console.error("AJAX error:", xhr.status, xhr.responseText);
					}
				},

				columns: [
					{
						data: "bookingId",
						render: function (id) {
							return `
              <div class="sherah-language-form__input">
                
                <p class="crany-table__product--number">
                  <a href="#" class="sherah-color1">#${id}</a>
                </p>
              </div>
            `;
						}
					},
					{
						data: "createdAt",
						render: function (v) {
							return `<p class="sherah-table__product-desc">${formatDateTime(v)}</p>`;
						}
					},
					{
						data: "paymentStatus",
						render: function (v) {
							return `<div class="sherah-table__product-content">${paymentHtml(v)}</div>`;
						}
					},
					{
						data: "providerRevenue",
						render: function (v) {
							return `<p class="sherah-table__product-desc">${(v ?? 0).toLocaleString("vi-VN")}</p>`;
						}
					},
					{
						data: "bookingStatus",
						render: function (v) {
							return orderHtml(v);
						}
					},
					{
						data: null,
						orderable: false,
						render: function (row) {
							return `
      <a href="order-details.html?id=${row.bookingId}"
         class="sherah-table__action sherah-color2 sherah-color3__bg--opactity js-view-order"
         data-id="${row.bookingId}">
         Xem chi tiết
      </a>`;
						}
					}
				]
			});
		}

		bootOrderList();
	</script>




</body>

<!-- Mirrored from nta0309-ecommerce-admin-dashboard.netlify.app/order-list by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Jan 2026 02:38:14 GMT -->

</html>