<!DOCTYPE html>
<html class="no-js" lang="zxx">

<!-- Mirrored from nta0309-ecommerce-admin-dashboard.netlify.app/customer-list by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Jan 2026 02:38:09 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>
	<!-- Meta Tags -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="keywords" content="Site keywords here">
	<meta name="description" content="#">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Site Title -->
	<title>Sherah - HTML eCommerce Dashboard Template</title>

	<!-- Font -->
	<link
		href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,300;1,400;1,500;1,700;1,900&amp;display=swap"
		rel="stylesheet">

	<!-- Fav Icon -->
	<link rel="icon" href="img/favicon.png">

	<!-- sherah Stylesheet -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/font-awesome-all.min.css">
	<link rel="stylesheet" href="css/charts.min.css">
	<link rel="stylesheet" href="css/datatables.min.css">
	<link rel="stylesheet" href="css/jvector-map.css">
	<link rel="stylesheet" href="css/slickslider.min.css">
	<link rel="stylesheet" href="css/jquery-ui.css">
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="style.css">

</head>

<body id="sherah-dark-light">

	<div class="sherah-body-area">
		<!-- sherah Admin Menu -->
		
		<!-- End sherah Admin Menu -->

		<!-- Start Header -->
		<div id="header-container"></div>
		<!-- End sherah Admin Menu -->
		<div id="dashboard-container"></div>
		<!-- End Header -->

		<!-- sherah Dashboard -->
		<section class="sherah-adashboard sherah-show">
			<div class="container">
				<div class="row">
					<div class="col-12">
						<div class="sherah-body">
							<!-- Dashboard Inner -->
							<div class="sherah-dsinner">
								<div class="row">
									<div class="col-12">
										<div class="sherah-breadcrumb mg-top-30">
											<h2 class="sherah-breadcrumb__title">Pages</h2>
											<ul class="sherah-breadcrumb__list">
												<li><a href="#">Home</a></li>
												<li class="active"><a href='customer-list.html'>User List</a></li>
											</ul>
										</div>
									</div>
								</div>
								<div class="sherah-table sherah-page-inner sherah-border sherah-default-bg mg-top-25">
									<!-- Filter, Search, and Page Controls -->
									<div
										style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
										<div>
											<label for="role-filter">Role: </label>
											<select id="role-filter">
												<option value="">All</option>
												<option value="user">User</option>
												<option value="admin">Admin</option>
												<option value="provider">Provider</option>
											</select>
										</div>
										<div>
											<input id="search-name" type="text" placeholder="Search by name..."
												style="padding: 4px 8px; border-radius: 4px; border: 1px solid #ccc;">
										</div>
									</div>
									<table id="sherah-table__vendor" class="sherah-table__main sherah-table__main-v3">
										<!-- sherah Table Head -->
										<thead class="sherah-table__head">
											<tr>
												<th class="sherah-table__column-2 sherah-table__h2 sortable"
													data-sort="fullName">Name <span class="sort-indicator"></span></th>
												<th class="sherah-table__column-3 sherah-table__h3 sortable"
													data-sort="email">Email <span class="sort-indicator"></span></th>
												<th class="sherah-table__column-4 sherah-table__h4 sortable"
													data-sort="fullName">Fullname <span class="sort-indicator"></span>
												</th>
												<th class="sherah-table__column-5 sherah-table__h5 sortable"
													data-sort="phone">Phone <span class="sort-indicator"></span></th>
												<th class="sherah-table__column-7 sherah-table__h6 sortable"
													data-sort="status">Status <span class="sort-indicator"></span></th>
												<th class="sherah-table__column-8 sherah-table__h7 sortable"
													data-sort="createdAt">Join On <span class="sort-indicator"></span>
												</th>
												<th class="sherah-table__column-9 sherah-table__h8 sortable"
													data-sort="role">Role <span class="sort-indicator"></span></th>
											</tr>
										</thead>
										<tbody class="sherah-table__body" id="user-table-body">
											<!-- User rows will be injected here by JS -->
										</tbody>
									</table>
									<!-- Pagination Controls -->
									<div id="pagination"
										style="display: flex; justify-content: flex-end; align-items: center; margin-top: 12px;">
									</div>
								</div>
							</div>
							<!-- End Dashboard Inner -->
						</div>
					</div>


				</div>
			</div>
		</section>
		<!-- End sherah Dashboard -->

	</div>

	<!-- sherah Scripts -->
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery-migrate.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/charts.js"></script>
	<script src="js/datatables.min.js"></script>
	<script src="js/circle-progress.min.js"></script>
	<script src="js/jquery-jvectormap.js"></script>
	<script src="js/jvector-map.js"></script>
	<script src="js/slickslider.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/auth-header.js"></script>
	
	<script>
		async function loadLayout() {
			const headerRes = await fetch("header.html");
			document.getElementById("header-container").innerHTML = await headerRes.text();

			const dashRes = await fetch("dashboard.html");
			document.getElementById("dashboard-container").innerHTML = await dashRes.text();

			initSherahLayout();

			// ✅ quan trọng: gọi sau khi header đã có trong DOM
			if (window.loadAuthToHeader) window.loadAuthToHeader();
		}
	</script>

	 <script>
  document.addEventListener("DOMContentLoaded", () => {
    loadLayout();
  });
</script>

	<style>
		/* --- CSS cho Role (Quyền hạn) --- */
		.role-badge {
			display: inline-block;
			padding: 5px 10px;
			border-radius: 15px;
			font-size: 12px;
			font-weight: 600;
			text-transform: capitalize;
			margin-right: 5px;
			margin-bottom: 5px;
		}

		/* Màu sắc riêng cho từng Role */
		.role-admin {
			background-color: #ffebee;
			/* Nền đỏ nhạt */
			color: #c62828;
			/* Chữ đỏ đậm */
			border: 1px solid #ffcdd2;
		}

		.role-provider {
			background-color: #e3f2fd;
			/* Nền xanh dương nhạt */
			color: #1565c0;
			/* Chữ xanh dương đậm */
			border: 1px solid #bbdefb;
		}

		.role-customer {
			background-color: #e8f5e9;
			/* Nền xanh lá nhạt */
			color: #2e7d32;
			/* Chữ xanh lá đậm */
			border: 1px solid #c8e6c9;
		}

		/* Fallback cho role lạ */
		.role-default {
			background-color: #f5f5f5;
			color: #616161;
			border: 1px solid #e0e0e0;
		}

		/* --- CSS cho Status Select (Trạng thái) --- */
		.status-select {
			padding: 6px 12px;
			border-radius: 6px;
			font-weight: 600;
			font-size: 13px;
			cursor: pointer;
			outline: none;
			border: 1px solid transparent;
			transition: all 0.3s ease;
			appearance: none;
			/* Ẩn mũi tên mặc định để đẹp hơn (tùy chọn) */
			-webkit-appearance: none;
			text-align: center;
			width: 100%;
			max-width: 120px;
		}

		/* Màu khi Active */
		.status-active {
			background-color: #e0f2f1;
			/* Xanh ngọc nhạt */
			color: #00695c;
			border-color: #80cbc4;
		}

		/* Màu khi Blocked */
		.status-blocked {
			background-color: #fbe9e7;
			/* Cam đỏ nhạt */
			color: #d84315;
			border-color: #ffab91;
		}

		/* Hiệu ứng hover cho select */
		.status-select:hover {
			opacity: 0.9;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}
	</style>


	<script>
		const API_BASE =
			location.hostname === "localhost" || location.hostname === "127.0.0.1"
				? "http://localhost:5135/api"
				: "/api";

		const apiBase = `${API_BASE}/Users`;

		let allUsers = [];
		let currentPage = 1;
		const pageSize = 6;
		let currentSort = { field: '', dir: '' };

		function renderUsers(users) {
			const tbody = document.getElementById('user-table-body');
			tbody.innerHTML = '';
			users.forEach(user => {
				const roles = (user.role || user.roles || []);
				const roleNames = Array.isArray(roles) ? roles.map(r => r.roleName || r.RoleName || '').filter(Boolean) : [];
				if (roleNames.includes('admin') || roleNames.includes('Admin')) return;

				const status = (user.status || '').toUpperCase();

				let statusColor = '';
				if (status === 'ACTIVE') statusColor = 'background:#4caf50;color:#fff;';
				else if (status === 'BLOCKED') statusColor = 'background:#f44336;color:#fff;';

				const statusOptions = [
					{ value: 'ACTIVE', label: 'Active' },
					{ value: 'BLOCKED', label: 'Blocked' }
				];

				const tr = document.createElement('tr');
				tr.innerHTML = `
				<td class="sherah-table__column-1 sherah-table__data-1">
					<div class="sherah-table__product">
						<h4 class="sherah-table__vendor--title"><a href="#">${user.fullName || ''}</a></h4>
					</div>
				</td>
				<td class="sherah-table__column-2 sherah-table__data-2">
					<div class="sherah-table__product-content">
						<p class="sherah-table__product-desc">${user.email || ''}</p>
					</div>
				</td>
				<td class="sherah-table__column-3 sherah-table__data-3">
					<div class="sherah-table__product-content">
						<p class="sherah-table__product-desc">${user.fullName || ''}</p>
					</div>
				</td>
				<td class="sherah-table__column-4 sherah-table__data-4">
					<div class="sherah-table__product-content">
						<p class="sherah-table__product-desc">${user.phone || ''}</p>
					</div>
				</td>
				<td class="sherah-table__column-5 sherah-table__data-5">
					<select class="sherah-table__status" style="${statusColor} border:none; border-radius:4px; padding:2px 8px;" onchange="updateStatus(${user.id}, this.value)">
						${statusOptions.map(opt => `<option value="${opt.value}" ${(status === opt.value) ? 'selected' : ''}>${opt.label}</option>`).join('')}
					</select>
				</td>
				<td class="sherah-table__column-6 sherah-table__data-6">
					<div class="sherah-table__product-content">
						<p class="sherah-table__product-desc">${user.createdAt ? new Date(user.createdAt).toLocaleDateString() : ''}</p>
					</div>
				</td>
				<td class="sherah-table__column-7 sherah-table__data-7">
					<div class="sherah-table__product-content">
						<p class="sherah-table__product-desc">${roleNames.join(', ')}</p>
					</div>
				</td>
			`;
				tbody.appendChild(tr);
			});
		}

		function renderPagination(total, page, pageSize) {
			const pageCount = Math.ceil(total / pageSize);
			const pagination = document.getElementById('pagination');
			pagination.innerHTML = '';
			if (pageCount <= 1) return;
			let html = '';
			html += `<button ${page === 1 ? 'disabled' : ''} onclick="gotoPage(${page - 1})">&lt;</button>`;
			for (let i = 1; i <= pageCount; i++) {
				html += `<button ${i === page ? 'style="font-weight:bold; background:#eee;"' : ''} onclick="gotoPage(${i})">${i}</button>`;
			}
			html += `<button ${page === pageCount ? 'disabled' : ''} onclick="gotoPage(${page + 1})">&gt;</button>`;
			pagination.innerHTML = html;
		}

		function updateStatus(id, status) {
			fetch(`${apiBase}/${id}/status`, {
				method: 'PUT',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify({ status: status })
			})
				.then(res => res.json())
				.then(res => {
					if (!res.success) {
						alert('Failed to update status: ' + (res.message || 'Unknown error'));
					}
					fetchUsers();
				})
				.catch(err => alert('Failed to update status: ' + err));
		}

		function deleteUser(id, el) {
			if (!confirm('Are you sure you want to delete this user?')) return;
			fetch(`${apiBase}/${id}`, { method: 'DELETE' })
				.then(res => res.json())
				.then(res => {
					if (res.success) {
						const row = el.closest('tr');
						if (row) row.remove();
					} else {
						alert('Delete failed: ' + (res.message || 'Unknown error'));
					}
				})
				.catch(err => {
					alert('Delete failed: ' + err);
				});
		}

		function gotoPage(page) {
			currentPage = page;
			renderUserTable();
		}

		function sortBy(field) {
			if (currentSort.field === field) {
				currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
			} else {
				currentSort.field = field;
				currentSort.dir = 'asc';
			}
			renderUserTable();
			updateSortIndicators();
		}

		function updateSortIndicators() {
			document.querySelectorAll('th.sortable').forEach(th => {
				const span = th.querySelector('.sort-indicator');
				if (!span) return;
				if (th.dataset.sort === currentSort.field) {
					span.textContent = currentSort.dir === 'asc' ? '▲' : '▼';
				} else {
					span.textContent = '';
				}
			});
		}

		function renderUserTable() {
			let users = allUsers.slice();
			// Filter by role
			const role = document.getElementById('role-filter').value;
			if (role) {
				users = users.filter(u => {
					const roles = (u.role || u.roles || []);
					const roleNames = Array.isArray(roles) ? roles.map(r => r.roleName || r.RoleName || '').filter(Boolean) : [];
					return roleNames.map(r => r.toLowerCase()).includes(role.toLowerCase());
				});
			}
			// Search by name
			const search = document.getElementById('search-name').value.trim().toLowerCase();
			if (search) {
				users = users.filter(u => (u.fullName || '').toLowerCase().includes(search));
			}
			// Sort
			if (currentSort.field) {
				users.sort((a, b) => {
					let va = a[currentSort.field] || '';
					let vb = b[currentSort.field] || '';
					if (currentSort.field === 'createdAt') {
						va = va ? new Date(va) : 0;
						vb = vb ? new Date(vb) : 0;
					}
					if (typeof va === 'string') va = va.toLowerCase();
					if (typeof vb === 'string') vb = vb.toLowerCase();
					if (va < vb) return currentSort.dir === 'asc' ? -1 : 1;
					if (va > vb) return currentSort.dir === 'asc' ? 1 : -1;
					return 0;
				});
			}
			// Pagination
			const total = users.length;
			const start = (currentPage - 1) * pageSize;
			const paged = users.slice(start, start + pageSize);
			renderUsers(paged);
			renderPagination(total, currentPage, pageSize);
		}

		function fetchUsers() {
			fetch(apiBase)
				.then(res => res.json())
				.then(res => {
					if (res.success && Array.isArray(res.data)) {
						allUsers = res.data;
						currentPage = 1;
						renderUserTable();
					}
				})
				.catch(err => {
					console.error('Failed to fetch users:', err);
				});
		}

		document.addEventListener('DOMContentLoaded', function () {
			fetchUsers();
			document.getElementById('role-filter').addEventListener('change', function () {
				currentPage = 1;
				renderUserTable();
			});
			document.getElementById('search-name').addEventListener('input', function () {
				currentPage = 1;
				renderUserTable();
			});
			document.querySelectorAll('th.sortable').forEach(th => {
				th.style.cursor = 'pointer';
				th.addEventListener('click', function () {
					sortBy(th.dataset.sort);
				});
			});
		});
	</script>
	<style>
		/* ===== USER STATUS SELECT – SAME STYLE AS PRODUCT ===== */
		.sherah-table__status {
			padding: 8px 18px !important;
			border-radius: 8px !important;
			font-weight: 600;
			font-size: 15px;
			cursor: pointer;
			outline: none;
			border: 1.5px solid #bdbdbd !important;
			transition: all 0.3s ease;
			appearance: none;
			-webkit-appearance: none;
			text-align: center;
			background: #f7f7f7;
			color: #333;
			box-shadow: 0 1px 4px rgba(0, 0, 0, 0.07);
			min-width: 120px;
		}

		/* Active = Available */
		.sherah-table__status option[value="active"]:checked,
		.sherah-table__status.active,
		.sherah-table__status[data-status="active"] {
			background-color: #e8f5e9;
			color: #1b5e20;
			border-color: #43a047;
		}

		/* Blocked = Unavailable */
		.sherah-table__status option[value="blocked"]:checked,
		.sherah-table__status.blocked,
		.sherah-table__status[data-status="blocked"] {
			background-color: #fdecea;
			color: #c62828;
			border-color: #c62828;
		}

		/* Hover giống product */
		.sherah-table__status:hover {
			opacity: 0.97;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.13);
		}
	</style>


</body>

<!-- Mirrored from nta0309-ecommerce-admin-dashboard.netlify.app/customer-list by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 10 Jan 2026 02:38:10 GMT -->

</html>